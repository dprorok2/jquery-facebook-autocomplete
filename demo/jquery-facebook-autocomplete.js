!function(a){"use strict";a.autoComplete=function(b){var c=[],d=this,e=b,f=e.attr("id"),g=function(){d.initFriendsList(),d.initKeyboardControls(),d.initDiv()};d.initFriendsList=function(){FB.api("/me/taggable_friends?fields=name,picture",function(a){if(a&&a.data&&!a.error)for(var b=1;b<a.data.length+1;b++){var d={name:a.data[b-1].name,picture:a.data[b-1].picture.data.url};c[b]=d}}),FB.api("/me?fields=name,picture",function(a){if(a&&!a.error){var b={name:a.name,picture:a.picture.data.url};c[0]=b}})},d.initKeyboardControls=function(){a(e).keyup(function(a){13==a.which?d.submit():38==a.which?d.moveUp():40==a.which?d.moveDown():27==a.which?d.hideFriends():d.search()})},d.search=function(){d.showFriends();for(var a=[],b=0,f=0;f<c.length&&10>b;f++){var g=!1;g=c[f].name.toLowerCase().indexOf(e.val().toLowerCase())>=0,g&&(a.push(c[f]),b++)}d.drawFriends(a)},d.submit=function(){},d.moveUp=function(){},d.moveDown=function(){},d.initDiv=function(){var b="<div class='autocomplete' id='"+f+"-autocomplete'><ul class='autocomplete-list' id ='"+f+"-autocomplete-list'></ul></div>";e.after(b),a("#"+f+"-autocomplete").width(e.outerWidth());var c=e.offset().left-e.position().left;a("#"+f+"-autocomplete").css("left",c),a("#"+f+"-autocomplete").css("position","relative"),d.hideFriends(),a(e).focusout(function(){d.hideFriends()}),a(e).focusin(function(){d.drawFriends()})},d.drawFriends=function(b){d.clearFriends(),0==b.length&&d.hideFriends();for(var c=0;c<b.length;c++){var e=b[c],g=e.name,h=e.picture,i="<li class='autocomplete-user "+f+"-autocomplete-user'title='"+g+"' role='option'>";i+="<img class='autocomplete-image' src='"+h+"'>",i+="<span class='autocomplete-name'>"+g+"</span>",i+="</li>",a("#"+f+"-autocomplete-list").append(i)}a(".autocomplete-user").hover(function(){a(this).addClass("autocomplete-user-selected")},function(){a(this).removeClass("autocomplete-user-selected")})},d.clearFriends=function(){a("."+f+"-autocomplete-user").remove()},d.hideFriends=function(){a("#"+f+"-autocomplete").hide()},d.showFriends=function(){a("#"+f+"-autocomplete").show()},g()}}(jQuery);